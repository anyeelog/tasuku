!function(){!async function(){try{const n="/api/tasks?id="+s(),a=await fetch(n),o=await a.json();t=o.tasks,e()}catch(t){console.log(t)}}();let t=[];function e(){if(function(){const t=document.querySelector("#tasks");for(;t.firstChild;)t.removeChild(t.firstChild)}(),0===t.length){const t=document.querySelector("#tasks"),e=document.createElement("LI");return e.textContent="There are no tasks",e.classList.add("no-tasks"),void t.appendChild(e)}const e={0:"Incompleted",1:"Completed"};t.forEach(t=>{const n=document.createElement("LI");n.dataset.taskId=t.id,n.classList.add("task");const a=document.createElement("P");a.textContent=t.name;const o=document.createElement("DIV");o.classList.add("options");const c=document.createElement("BUTTON");c.classList.add("task-state"),c.classList.add(""+e[t.status].toLowerCase()),c.textContent=e[t.status],c.dataset.statusTask=t.status,c.onclick=function(){!function(t){const e="1"===t.status?"0":"1";t.status=e,function(t){const{id:e,name:n,status:a,project_id:o}=t,c=new FormData;c.append("id",e),c.append("name",n),c.append("status",a),c.append("project_id",o),c.append("url",s());for(let t of c.values())console.log(t)}()}({...t})};const d=document.createElement("BUTTON");d.classList.add("delete-task"),d.dataset.idTask=t.id,d.textContent="Delete",o.appendChild(c),o.appendChild(d),n.appendChild(a),n.appendChild(o);document.querySelector("#tasks").appendChild(n)})}function n(t,e,n){const s=document.querySelector(".alerts");s&&s.remove();const a=document.createElement("UL");a.classList.add("alerts"),a.innerHTML=`<li class="alert ${e}">${t}</li>`,n.parentElement.insertBefore(a,n)}function s(){const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries()).id}document.querySelector("#add-task").addEventListener("click",(function(){const a=document.createElement("DIV");a.classList.add("modal"),a.innerHTML='\n      <div class="form-container">\n        <p class="page-description">Add a new task</p>\n        <p style="padding: 0 50px;">Don\'t worry! Enter your email address and we\'ll send you a reset link.</p>\n        <form class="form form-task">\n          <div class="camp">\n            <input type="text" name="task" id="task" placeholder="Task title">\n          </div>\n          <div class="options">\n            <input type="submit" class="submit-new-task" value="Add task">\n            <button type="button" class="close-modal">Cancel</button>\n          </div>\n        </form>\n      </div>\n    ',setTimeout(()=>{document.querySelector(".form-container").classList.add("animate")},0),a.addEventListener("click",(function(o){o.preventDefault(),o.target.classList.contains("close-modal")&&a.remove(),o.target.classList.contains("submit-new-task")&&function(){const a=document.querySelector("#task").value.trim();if(""===a)return void n("Task name is required","error",document.querySelector(".options"));!async function(a){const o=new FormData;o.append("name",a),o.append("project_id",s());try{const s="http://localhost:3000/api/task",c=await fetch(s,{method:"POST",body:o}),d=await c.json();if(n(d.message,d.type,document.querySelector(".options")),"success"===d.type){document.querySelector(".modal").remove();const n={id:String(d.id),name:a,status:"0",project_id:d.project_id};t=[...t,n],e()}}catch(t){console.log(t)}}(a)}()})),document.querySelector("body").appendChild(a)}))}();