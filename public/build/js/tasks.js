!function(){!async function(){try{const t="/api/tasks?id="+e(),n=await fetch(t),s=await n.json(),{tasks:a}=s;!function(t){if(0===t.length){const t=document.querySelector("#tasks"),e=document.createElement("LI");return e.textContent="There are no tasks",e.classList.add("no-tasks"),void t.appendChild(e)}const e={0:"Incompleted",1:"Completed"};t.forEach(t=>{const n=document.createElement("LI");n.dataset.taskId=t.id,n.classList.add("task");const s=document.createElement("P");s.textContent=t.name;const a=document.createElement("DIV");a.classList.add("options");const o=document.createElement("BUTTON");o.classList.add("task-state"),o.classList.add(""+e[t.status].toLowerCase()),o.textContent=e[t.status],o.dataset.statusTask=t.status;const c=document.createElement("BUTTON");c.classList.add("delete-task"),c.dataset.idTask=t.id,c.textContent="Delete",a.appendChild(o),a.appendChild(c),n.appendChild(s),n.appendChild(a);document.querySelector("#tasks").appendChild(n)})}(a)}catch(t){console.log(t)}}();function t(t,e,n){const s=document.querySelector(".alerts");s&&s.remove();const a=document.createElement("UL");a.classList.add("alerts"),a.innerHTML=`<li class="alert ${e}">${t}</li>`,n.parentElement.insertBefore(a,n)}function e(){const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries()).id}document.querySelector("#add-task").addEventListener("click",(function(){const n=document.createElement("DIV");n.classList.add("modal"),n.innerHTML='\n      <div class="form-container">\n        <p class="page-description">Add a new task</p>\n        <p style="padding: 0 50px;">Don\'t worry! Enter your email address and we\'ll send you a reset link.</p>\n        <form class="form form-task">\n          <div class="camp">\n            <input type="text" name="task" id="task" placeholder="Task title">\n          </div>\n          <div class="camp">\n            <input type="text" name="project-select" id="project-select" placeholder="Select project">\n          </div>\n          <div class="options">\n            <input type="submit" class="submit-new-task" value="Add task">\n            <button type="button" class="close-modal">Cancel</button>\n          </div>\n        </form>\n      </div>\n    ',setTimeout(()=>{document.querySelector(".form-container").classList.add("animate")},0),n.addEventListener("click",(function(s){s.preventDefault(),s.target.classList.contains("close-modal")&&n.remove(),s.target.classList.contains("submit-new-task")&&function(){const n=document.querySelector("#task").value.trim();document.querySelector("#project-select").value.trim();if(""===n)return void t("Task name is required","error",document.querySelector(".options"));!async function(n){const s=new FormData;s.append("name",n),s.append("project_id",e());try{const e="http://localhost:3000/api/task",n=await fetch(e,{method:"POST",body:s}),a=await n.json();if(t(a.message,a.type,document.querySelector(".options")),"success"===a.type){document.querySelector(".modal").remove()}}catch(t){console.log(t)}}(n)}()})),document.querySelector("body").appendChild(n)}))}();