!function(){!async function(){try{const n="/api/tasks?id="+s(),a=await fetch(n),o=await a.json();t=o.tasks,e()}catch(t){console.log(t)}}();let t=[];function e(){if(function(){const t=document.querySelector("#tasks");for(;t.firstChild;)t.removeChild(t.firstChild)}(),0===t.length){const t=document.querySelector("#tasks"),e=document.createElement("LI");return e.textContent="There are no tasks",e.classList.add("no-tasks"),void t.appendChild(e)}const e={0:"Incompleted",1:"Completed"};t.forEach(t=>{const n=document.createElement("LI");n.dataset.taskId=t.id,n.classList.add("task");const a=document.createElement("DIV");a.classList.add("task-header");const o=document.createElement("H4");o.classList.add("task-name"),o.textContent=t.name;const c=document.createElement("P");c.classList.add("task-description"),t.description?c.textContent=t.description:c.textContent="(No description)";const d=document.createElement("DIV");d.classList.add("task-footer");const i=document.createElement("P");i.classList.add("task-status"),i.classList.add(""+e[t.status].toLowerCase()),i.textContent=e[t.status],i.dataset.statusTask=t.status;const r=document.createElement("BUTTON");r.classList.add("toggle-task"),r.dataset.idTask=t.id,r.textContent="Complete Task",r.onclick=function(){!function(t){const e="1"===t.status?"0":"1";t.status=e,async function(t){const{id:e,name:n,description:a,status:o,project_id:c}=t,d=new FormData;d.append("id",e),d.append("name",n),d.append("description",a),d.append("status",o),d.append("url",s());try{const t="http://localhost:3000/api/task/update",e=await fetch(t,{method:"POST",body:d});"success"===(await e.json()).response.type&&console.log("Correctly updated.")}catch(t){console.log(t)}}(t)}({...t})};const l=document.createElement("IMG");l.setAttribute("src","https://img.icons8.com/?size=512&id=G3ke6AwujrRv&format=png"),l.setAttribute("height","32px"),l.setAttribute("alt","Delete button");const p=document.createElement("BUTTON");p.classList.add("delete-task"),p.dataset.idTask=t.id,n.appendChild(a),n.appendChild(c),n.appendChild(d),a.appendChild(o),p.appendChild(l),a.appendChild(p),d.appendChild(r),d.appendChild(i);document.querySelector("#tasks").appendChild(n)})}function n(t,e,n){const s=document.querySelector(".alerts");s&&s.remove();const a=document.createElement("UL");a.classList.add("alerts"),a.innerHTML=`<li class="alert ${e}">${t}</li>`,n.parentElement.insertBefore(a,n)}function s(){const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries()).id}document.querySelector("#add-task").addEventListener("click",(function(){const a=document.createElement("DIV");a.classList.add("modal"),a.innerHTML='\n      <div class="form-container">\n        <p class="page-description">Add a new task</p>\n        <p style="padding: 0 50px;">Don\'t worry! Enter your email address and we\'ll send you a reset link.</p>\n        <form class="form form-task">\n          <div class="camp">\n            <input type="text" name="task" id="task" placeholder="Task title">\n          </div>\n          <div class="camp">\n            <input type="text" name="task-description" id="task-description" placeholder="Task description">\n          </div>\n          <div class="options">\n            <input type="submit" class="submit-new-task" value="Add task">\n            <button type="button" class="close-modal">Cancel</button>\n          </div>\n        </form>\n      </div>\n    ',setTimeout(()=>{document.querySelector(".form-container").classList.add("animate")},0),a.addEventListener("click",(function(o){o.preventDefault(),o.target.classList.contains("close-modal")&&a.remove(),o.target.classList.contains("submit-new-task")&&function(){const a=document.querySelector("#task").value.trim(),o=document.querySelector("#task-description").value.trim();if(""===a)return void n("Task name is required","error",document.querySelector(".options"));!async function(a,o){const c=new FormData;c.append("name",a),c.append("description",o),c.append("project_id",s());try{const s="http://localhost:3000/api/task",d=await fetch(s,{method:"POST",body:c}),i=await d.json();if(n(i.message,i.type,document.querySelector(".options")),"success"===i.type){document.querySelector(".modal").remove();const n={id:String(i.id),name:a,description:o,status:"0",project_id:i.project_id};t=[...t,n],e()}}catch(t){console.log(t)}}(a,o)}()})),document.querySelector("body").appendChild(a)}))}();